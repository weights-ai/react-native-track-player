"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8505],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return b}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),b=a,m=d["".concat(c,".").concat(b)]||d[b]||u[b]||i;return n?o.createElement(m,r(r({ref:t},p),{},{components:n})):o.createElement(m,r({ref:t},p))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1142:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return b},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var o=n(7462),a=n(3366),i=(n(7294),n(3905)),r=["components"],l={sidebar_position:4},c="Background Mode",s={unversionedId:"basics/background-mode",id:"version-2.1/basics/background-mode",title:"Background Mode",description:"React Native Track Player supports playing audio while your app is in the background on all supported platforms.",source:"@site/versioned_docs/version-2.1/basics/background-mode.md",sourceDirName:"basics",slug:"/basics/background-mode",permalink:"/docs/2.1/basics/background-mode",editUrl:"https://github.com/doublesymmetry/react-native-track-player/tree/main/docs/versioned_docs/version-2.1/basics/background-mode.md",tags:[],version:"2.1",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"app",previous:{title:"Playback Service",permalink:"/docs/2.1/basics/playback-service"},next:{title:"Platform Support",permalink:"/docs/2.1/basics/platform-support"}},p={},u=[{value:"Android",id:"android",level:2},{value:"Notification",id:"notification",level:3},{value:"iOS",id:"ios",level:2},{value:"iOS Simulator",id:"ios-simulator",level:3},{value:"Windows",id:"windows",level:2}],d={toc:u};function b(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"background-mode"},"Background Mode"),(0,i.kt)("p",null,"React Native Track Player supports playing audio while your app is in the background on all supported platforms."),(0,i.kt)("h2",{id:"android"},"Android"),(0,i.kt)("p",null,"Background audio playback works right out of the box. By default, the audio will continue to play, not only when the app is suspended in the background, but also after the app is closed by the user. If that is not the desired behavior and you want the audio to stop playing when the app is closed, you can disable it with the ",(0,i.kt)("inlineCode",{parentName:"p"},"stoppingAppPausesPlayback")," property in ",(0,i.kt)("inlineCode",{parentName:"p"},"updateOptions"),". In this case, the audio will still play while the app is open in the background.:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"TrackPlayer.updateOptions({\n  stoppingAppPausesPlayback: true,\n});\n")),(0,i.kt)("p",null,"Please note that while your app is in background, your UI might be unmounted by React Native. Event listeners added in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/2.1/basics/playback-service"},"playback service")," will continue to receive events."),(0,i.kt)("h3",{id:"notification"},"Notification"),(0,i.kt)("p",null,"The notification will be visible as long as the playback service runs. Your app will be opened when it is clicked. You can implement a custom initialization (e.g.: opening directly the player UI) by using the ",(0,i.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/linking"},"Linking API")," looking for the ",(0,i.kt)("inlineCode",{parentName:"p"},"trackplayer://notification.click")," URI."),(0,i.kt)("h2",{id:"ios"},"iOS"),(0,i.kt)("p",null,"To allow background audio playback on iOS, you need to activate the 'Audio, Airplay and Picture in Picture' background mode in Xcode. Without activating it, the audio will only play when the app is in the foreground."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://developer.apple.com/library/content/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Art/background_modes_2x.png",alt:"Xcode Background Capability"})),(0,i.kt)("h3",{id:"ios-simulator"},"iOS Simulator"),(0,i.kt)("p",null,"As of iOS Simulator version 11, Apple has removed support for Control Center and Now Playing Info from the simulator. You will not be able to test lock screen controls on recent versions of iOS Simulator. You can either test on real devices, or download older versions of the iOS Simulator."),(0,i.kt)("h2",{id:"windows"},"Windows"),(0,i.kt)("p",null,"To allow background audio playback on Windows, you need to add the background capability in the app manifest, as ",(0,i.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/windows/uwp/audio-video-camera/background-audio#background-media-playback-manifest-capability"},"documented by Microsoft")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<Capabilities>\n    <uap3:Capability Name="backgroundMediaPlayback"/>\n</Capabilities>\n')))}b.isMDXComponent=!0}}]);